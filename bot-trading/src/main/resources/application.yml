research:
  nightly:
    enabled: true
    start-cron: "0 20 * * *"
    zone: UTC
    dataset:
      symbol: BTCUSDT
      interval: 1m
      history-days: 180
      use-cache: true
    ga:
      population: 30
      generations: 20
      seed: 42
      min-trades: 150
      min-samples: 100
      complexity-penalty: 0.5
      train-days: 90
      validation-days: 30
      test-days: 30
    gate:
      epsilon-pf: 0.10
      maxdd-cap-pct: 8.0
      min-trades-oos: 150
      shadow-min-trades: 50
      shadow-pf-drop-tolerance: 0.15
      pf-baseline: 1.0
    reporting:
      base-dir: reports/nightly

presets:
  promotion:
    epsilon_pf: 0.10
    maxdd_cap_pct: 8.0
    min_trades_oos: 150
    shadow_min_trades: 50
    shadow_pf_drop_tolerance: 0.15
    pf_baseline: 1.0
  canary:
    stages: [0.5, 0.75, 1.0]
    stage_window_trades: 30
  auto-promote: false
leaderboard:
  enabled: true
risk:
  maxDailyLossPct: 3.0
  maxDrawdownPct: 8.0
  maxApiErrorPct: 5.0
  maxWsReconnectsPerHour: 6
  forceCloseOnPause: true
  maxOpeningsPerDay: 10
  maxTradeNotional: 0
anomaly:
  enabled: true
  window: 300
  minSamples: 200
  coolDownSec: 900
  zscore:
    warn: 2.5
    mitigate: 3.5
  actions:
    severe: PAUSE
    high: SIZE_DOWN_50
    medium: SWITCH_TO_MARKET
throttle:
  window1s: 1200
  window60s: 72000
  on429:
    backoffMs: 500
  on5xx:
    backoffMs: 300
  queue:
    maxDepthPerSymbol: 100
    maxDepthGlobal: 2000
bandit:
  enabled: true
  algorithm: THOMPSON
  reward:
    metric: pnl_r
    cap_r: 3.0
    slippage_penalty_bps: 0.30
    fees_penalty_bps: 0.20
  canary:
    max_trades_per_day: 20
    max_share_pct_per_day: 0.25
  min_samples_to_compete: 30
  decay:
    half_life_days: 21
var:
  enabled: true
  quantile: 0.99
  cvar_target_pct_per_trade: 0.25
  cvar_target_pct_per_day: 1.5
  lookback_trades: 250
  min_trades_for_symbol_preset: 80
  fallback_to_regime_pool: true
  mc_iterations: 20000
  heavy_tails: true
chaos:
  enabled: false
  ws-drop-rate-pct: 0
  api-burst429-seconds: 0
  latency-multiplier: 1.0
  candles-gap-pattern: NONE
  clock-drift-ms: 0
  safety:
    max-duration-sec: 600

saas:
  billing:
    provider: stripe
  plans:
    starter:
      max_bots: 1
      max_symbols: 1
      canary_share_max: 0.10
      data_retention_days: 90
    pro:
      max_bots: 5
      max_symbols: 3
      canary_share_max: 0.25
      data_retention_days: 365
  onboarding:
    shadow_trades_min: 40
  security:
    enforce_no_withdrawal: true
    require_ip_allowlist: true
  legal:
    terms_version: "1.0.0"
  metrics:
    plan_cache_ttl_seconds: 300
