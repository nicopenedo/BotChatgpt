<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Preset Detail</title>
    <style>
        .metrics { display: flex; gap: 1rem; }
        .metrics section { flex: 1; border: 1px solid #ccc; padding: 1rem; }
        pre { background: #f5f5f5; padding: 0.5rem; overflow: auto; }
    </style>
</head>
<body>
<h1 th:text="'Preset ' + ${preset.id}"></h1>
<p><strong>Status:</strong> <span th:text="${preset.status}"></span></p>
<p><strong>Regime:</strong> <span th:text="${preset.regime}"></span>
   <strong>Side:</strong> <span th:text="${preset.side}"></span></p>
<p><strong>Source run:</strong> <span th:text="${preset.sourceRunId}"></span></p>
<div class="metrics">
    <section>
        <h2>Snapshots</h2>
        <table>
            <thead>
            <tr>
                <th>Window</th>
                <th>Created</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="snap : ${snapshots}">
                <td th:text="${snap.window}"></td>
                <td th:text="${snap.createdAt}"></td>
            </tr>
            </tbody>
        </table>
    </section>
    <section>
        <h2>Live Tracking</h2>
        <table>
            <thead>
            <tr>
                <th>Period</th>
                <th>PF</th>
                <th>Trades</th>
                <th>MaxDD</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="live : ${liveMetrics}">
                <td th:text="${live.tsFrom} + ' â†’ ' + ${live.tsTo}"></td>
                <td th:text="${live.pf}"></td>
                <td th:text="${live.trades}"></td>
                <td th:text="${live.maxDrawdown}"></td>
            </tr>
            </tbody>
        </table>
    </section>
</div>
<h2>Parameters</h2>
<pre th:text="${#strings.toString(preset.paramsJson)}"></pre>
<h2>Signals</h2>
<pre th:text="${#strings.toString(preset.signalsJson)}"></pre>
<p><a href="/ui/presets/leaderboard">Back to leaderboard</a></p>
</body>
</html>
