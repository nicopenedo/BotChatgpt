<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <th:block th:replace="~{layout :: layout(${preset.name}, 'presets', ~{::content})}">
    <th:block th:fragment="content">
      <section class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
        <div>
          <div class="flex items-center gap-2 text-xs text-slate-500">
            <span class="tag-pill" th:classappend="' ' + ${preset.statusClass}" th:text="${preset.status}">Activo</span>
            <span class="tag-pill regime" th:classappend="' ' + ${preset.regimeClass}" th:text="${preset.regime}">UP</span>
            <span class="tag-pill" th:text="${preset.side}">LONG</span>
          </div>
          <h2 class="mt-3 text-3xl font-semibold text-slate-900 dark:text-white" th:text="${preset.name}">Momentum Shadow</h2>
          <p class="text-sm text-slate-500" th:text="${preset.caption}">Estrategia GA optimizada para mercado alcista</p>
        </div>
        <div class="flex flex-wrap gap-2">
          <button class="btn-secondary" type="button">Retirar</button>
          <button class="btn-primary" type="button">Promover a activo</button>
        </div>
      </section>
      <section class="grid gap-6 lg:grid-cols-5">
        <article class="card lg:col-span-3">
          <div class="card-header">
            <h3 class="card-title">Performance por régimen</h3>
            <p class="card-subtitle">Últimos 180 días</p>
          </div>
          <canvas id="preset-performance-chart" class="chart" th:attr="data-chart=${performanceChart}"></canvas>
        </article>
        <article class="card lg:col-span-2">
          <div class="card-header">
            <h3 class="card-title">Métricas clave</h3>
          </div>
          <dl class="grid gap-4">
            <div th:each="metric : ${preset.metrics}" class="rounded-xl border border-slate-200 bg-white p-4 text-sm shadow-sm dark:border-slate-800 dark:bg-slate-900">
              <dt class="font-semibold text-slate-600 dark:text-slate-300" th:text="${metric.label}">PF</dt>
              <dd class="mt-1 text-lg text-slate-500 dark:text-slate-300" th:text="${metric.value}">1.8</dd>
            </div>
          </dl>
        </article>
        <article class="card lg:col-span-5">
          <div class="card-header">
            <h3 class="card-title">Parámetros</h3>
            <p class="card-subtitle">Configuración exportable en JSON</p>
          </div>
          <pre class="rounded-xl bg-slate-900/80 p-4 text-sm text-emerald-200" th:text="${preset.params}"></pre>
        </article>
        <article class="card lg:col-span-5">
          <div class="card-header">
            <h3 class="card-title">Snapshots</h3>
          </div>
          <div class="overflow-x-auto">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Window</th>
                  <th>Creado</th>
                  <th>PF</th>
                  <th>Trades</th>
                  <th>MaxDD</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="snapshot : ${snapshots}">
                  <td th:text="${snapshot.window}">30d</td>
                  <td th:text="${snapshot.createdAt}">2024-02-20</td>
                  <td th:text="${snapshot.pf}">1.9</td>
                  <td th:text="${snapshot.trades}">220</td>
                  <td th:text="${snapshot.maxDd}">-7.1%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </article>
      </section>
    </th:block>
  </th:block>
</html>
